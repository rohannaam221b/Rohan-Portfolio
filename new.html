<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>License Management Redesign</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="p-6 space-y-6">
    <!-- Header -->
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-semibold">License Management</h1>
      <div class="flex space-x-2">
        <input type="text" placeholder="Search users, licenses" class="px-3 py-2 border rounded-lg" />
        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg">Refresh</button>
      </div>
    </div>

    <!-- Filters + Metric Cards -->
    <div class="grid grid-cols-6 gap-4">
      <!-- Filters -->
      <div class="col-span-2 bg-white p-4 rounded-lg shadow">
        <h2 class="font-medium mb-2">Filters</h2>
        <div class="space-y-3">
          <div>
            <label class="text-sm font-medium">License Type</label>
            <select id="licenseFilter" class="mt-1 w-full border px-2 py-1 rounded">
              <option>All</option>
              <option>Pro Suite</option>
              <option>Standard</option>
              <option>Basic</option>
            </select>
          </div>
          <div>
            <label class="text-sm font-medium">Department</label>
            <select id="departmentFilter" class="mt-1 w-full border px-2 py-1 rounded">
              <option>All</option>
              <option>Engineering</option>
              <option>Sales</option>
              <option>HR</option>
            </select>
          </div>
          <div>
            <label class="text-sm font-medium">Status</label>
            <div class="flex space-x-2 mt-1">
              <button class="px-2 py-1 border rounded bg-blue-100 text-blue-700">Active</button>
              <button class="px-2 py-1 border rounded">Unused</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Metric Cards -->
      <div id="metricCards" class="col-span-4 grid grid-cols-5 gap-4">
        <div class="bg-white rounded-lg shadow p-4"><p class="text-sm">Licenses Bought</p><h3 class="text-xl font-semibold" id="licensesBought">0</h3></div>
        <div class="bg-white rounded-lg shadow p-4"><p class="text-sm">Provisioned Users</p><h3 class="text-xl font-semibold" id="provisionedUsers">0</h3></div>
        <div class="bg-white rounded-lg shadow p-4"><p class="text-sm">Usage</p><h3 class="text-xl font-semibold" id="usage">0%</h3></div>
        <div class="bg-white rounded-lg shadow p-4"><p class="text-sm">Risky Users</p><h3 class="text-xl font-semibold" id="riskyUsers">0</h3></div>
        <div class="bg-white rounded-lg shadow p-4"><p class="text-sm">Potential Savings</p><h3 class="text-xl font-semibold" id="potentialSavings">$0</h3></div>
      </div>
    </div>

    <!-- License Utilization + Analytics -->
    <div class="grid grid-cols-3 gap-4">
      <!-- License Utilization Table -->
      <div class="col-span-2 bg-white p-4 rounded-lg shadow">
        <h2 class="font-medium mb-2">License Utilization</h2>
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b">
              <th class="text-left p-2">License Type</th>
              <th class="text-left p-2">Cost / Seat</th>
              <th class="text-left p-2">Provisioned</th>
              <th class="text-left p-2">Active</th>
              <th class="text-left p-2">Usage</th>
              <th class="text-left p-2">Potential Savings</th>
            </tr>
          </thead>
          <tbody id="licenseTable"></tbody>
        </table>
      </div>

      <!-- User Analytics -->
      <div class="bg-white p-4 rounded-lg shadow">
        <h2 class="font-medium mb-2">User Analytics</h2>
        <canvas id="userAnalyticsChart"></canvas>
      </div>
    </div>

    <!-- Detailed User Table -->
    <div class="bg-white p-4 rounded-lg shadow">
      <h2 class="font-medium mb-2">Users (Detailed)</h2>
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b">
            <th class="p-2 text-left">User</th>
            <th class="p-2 text-left">License</th>
            <th class="p-2 text-left">Last Active</th>
            <th class="p-2 text-left">Department</th>
            <th class="p-2 text-left">Status</th>
          </tr>
        </thead>
        <tbody id="userTable"></tbody>
      </table>
    </div>
  </div>

  <script>
    // Mock Data
    const mockData = {
      metrics: {
        licensesBought: 120,
        provisionedUsers: 95,
        usage: 80,
        riskyUsers: 5,
        potentialSavings: 1200,
      },
      licenses: [
        { type: "Pro Suite", cost: 50, provisioned: 40, active: 35, usage: "88%", savings: 250 },
        { type: "Standard", cost: 30, provisioned: 35, active: 28, usage: "80%", savings: 210 },
        { type: "Basic", cost: 10, provisioned: 20, active: 12, usage: "60%", savings: 80 },
      ],
      users: [
        { name: "Alice Johnson", license: "Pro Suite", lastActive: "2025-09-10", dept: "Engineering", status: "Active" },
        { name: "Bob Smith", license: "Standard", lastActive: "2025-09-09", dept: "Sales", status: "Active" },
        { name: "Carol White", license: "Basic", lastActive: "2025-09-01", dept: "HR", status: "Inactive" },
      ],
    };

    // Populate Metrics
    document.getElementById("licensesBought").innerText = mockData.metrics.licensesBought;
    document.getElementById("provisionedUsers").innerText = mockData.metrics.provisionedUsers;
    document.getElementById("usage").innerText = mockData.metrics.usage + "%";
    document.getElementById("riskyUsers").innerText = mockData.metrics.riskyUsers;
    document.getElementById("potentialSavings").innerText = "$" + mockData.metrics.potentialSavings;

    // Populate License Table
    const licenseTable = document.getElementById("licenseTable");
    mockData.licenses.forEach(l => {
      const row = `<tr class='border-b'>
        <td class='p-2'>${l.type}</td>
        <td class='p-2'>$${l.cost}</td>
        <td class='p-2'>${l.provisioned}</td>
        <td class='p-2'>${l.active}</td>
        <td class='p-2'>${l.usage}</td>
        <td class='p-2'>$${l.savings}</td>
      </tr>`;
      licenseTable.innerHTML += row;
    });

    // Populate User Table
    const userTable = document.getElementById("userTable");
    mockData.users.forEach(u => {
      const row = `<tr class='border-b'>
        <td class='p-2'>${u.name}</td>
        <td class='p-2'>${u.license}</td>
        <td class='p-2'>${u.lastActive}</td>
        <td class='p-2'>${u.dept}</td>
        <td class='p-2'>${u.status}</td>
      </tr>`;
      userTable.innerHTML += row;
    });

    // User Analytics Chart
    const ctx = document.getElementById("userAnalyticsChart").getContext("2d");
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Engineering', 'Sales', 'HR'],
        datasets: [{
          data: [45, 30, 20],
          backgroundColor: ['#2563EB', '#10B981', '#F59E0B']
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } }
      }
    });
  </script>
</body>
</html>
